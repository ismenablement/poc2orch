name: Orchestrate

run-name: ${{ format('Orchestrate - {0}', inputs.branch ) }}

on:
  workflow_dispatch:
    inputs:
      branch:
        description: 'Branch to build (e.g., main)'
        required: false
        default: 'main'
        type: string

jobs:
  build-repoA:
    uses: ismenablement/poc2repoA/.github/workflows/build.yml@${{ github.event.inputs.branch }}
    with:
      branch: ${{ inputs.branch }}
  build-repoB:
    needs: build-repoA
    uses: ismenablement/poc2repoB/.github/workflows/build.yml@${{ github.event.inputs.branch }}
    with:
      branch: ${{ inputs.branch }}
  build-repoC:
    needs: build-repoA
    uses: ismenablement/poc2repoC/.github/workflows/build.yml@${{ github.event.inputs.branch }}
    with:
      branch: ${{ inputs.branch }}